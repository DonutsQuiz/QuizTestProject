{"version":3,"sources":["file:///Users/takeda.naomichi/TestQuizSecond/assets/Script/Game/Manager/QuizManager.ts"],"names":["_decorator","Component","Button","GestureQuiz","QuizModalManager","ccclass","property","QuizManager","quizType","quizComponent","answerData","Instance","instance","start","SetQuizType","startButton","node","on","EventType","CLICK","QuestionPhase","active","OnUpdate","AnswerPhase","GetResultModal","isNext","SetQuiz","type","destroy","addComponent","Initialize","GetChoicesModal","GetChoics","SetInfo","GetQuizData"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAA2BC,MAAAA,M,OAAAA,M;;AAEvCC,MAAAA,W,iBAAAA,W;;AAEAC,MAAAA,gB,iBAAAA,gB;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;;6BAGjBO,W,WADZF,OAAO,CAAC,aAAD,C,UAaHC,QAAQ,CAACJ,MAAD,C,sCAbb,MACaK,WADb,SACiCN,SADjC,CAC2C;AAAA;AAAA;;AAAA;;AAAA,eAevCO,QAfuC,GAejB,MAfiB;AAAA,eAgBvCC,aAhBuC,GAgBP,IAhBO;AAAA,eAiBvCC,UAjBuC,GAiBf,IAjBe;AAAA;;AAIjB,eAARC,QAAQ,GAAiB;AACnC,cAAG,CAACJ,WAAW,CAACK,QAAhB,EAAyB;AACrBL,YAAAA,WAAW,CAACK,QAAZ,GAAuB,IAAIL,WAAJ,EAAvB;AACH;;AAED,iBAAOA,WAAW,CAACK,QAAnB;AACH;;AASDC,QAAAA,KAAK,GAAE;AACHN,UAAAA,WAAW,CAACK,QAAZ,GAAuB,IAAvB;AAEA,eAAKE,WAAL,CAAiB,SAAjB;AAEA,eAAKC,WAAL,CAAiBC,IAAjB,CAAsBC,EAAtB,CAAyBf,MAAM,CAACgB,SAAP,CAAiBC,KAA1C,EAAiD,YAAU;AACvD,iBAAKC,aAAL;AACA,iBAAKL,WAAL,CAAiBC,IAAjB,CAAsBK,MAAtB,GAA+B,KAA/B;AACH,WAHD,EAGG,IAHH;AAIH;;AAEMC,QAAAA,QAAQ,GAAE;AACb,eAAKC,WAAL;;AAEA,cAAG;AAAA;AAAA,oDAAiBZ,QAAjB,GAA4Ba,cAA5B,GAA6CC,MAAhD,EAAuD;AACnD,iBAAKhB,aAAL,CAAmBiB,OAAnB;AACA;AAAA;AAAA,sDAAiBf,QAAjB,GAA4Ba,cAA5B,GAA6CC,MAA7C,GAAsD,KAAtD;AACH;AACJ;;AAEMX,QAAAA,WAAW,CAACa,IAAD,EAAiB;AAE/B,cAAG,KAAKlB,aAAR,EAAsB;AAClB,iBAAKA,aAAL,CAAmBmB,OAAnB;AACH;;AAED,cAAGD,IAAI,KAAK,SAAZ,EAAsB;AAClB,iBAAKlB,aAAL,GAAqB,KAAKoB,YAAL;AAAA;AAAA,2CAArB;AACH;;AACD,cAAGF,IAAI,KAAK,KAAZ,EAAkB,CACjB;;AACD,cAAGA,IAAI,KAAK,MAAZ,EAAmB,CAClB;AACJ,SApDsC,CAsDvC;;;AACQP,QAAAA,aAAa,GAAE;AACnB,eAAKX,aAAL,CAAmBqB,UAAnB;AACA,eAAKrB,aAAL,CAAmBiB,OAAnB;AACH,SA1DsC,CA4DvC;;;AACAH,QAAAA,WAAW,GAAE;AACT,cAAG;AAAA;AAAA,oDAAiBZ,QAAjB,GAA4BoB,eAA5B,GAA8CC,SAA9C,KAA4D,CAAC,CAAhE,EAAkE;AAC9D;AAAA;AAAA,sDAAiBrB,QAAjB,GAA4Ba,cAA5B,GAA6CS,OAA7C,CAAqD;AAAA;AAAA,sDAAiBtB,QAAjB,GAA4BoB,eAA5B,GAA8CC,SAA9C,EAArD,EAA+G,KAAKvB,aAAL,CAAmByB,WAAnB,EAA/G;AACH;AACJ;;AAjEsC,O,UAExBtB,Q;;;;;iBAWQ,I","sourcesContent":["import { _decorator, Component, Node, profiler, Button, InstancedBuffer } from 'cc';\nimport { QuizData } from '../Quiz/Data/QuizData';\nimport { GestureQuiz } from '../Quiz/GestureQuiz';\nimport { QuizComponent, QuizType } from '../Quiz/QuizComponent';\nimport { QuizModalManager } from './QuizModalManager';\nconst { ccclass, property } = _decorator;\n\n@ccclass('QuizManager')\nexport class QuizManager extends Component {\n\n    private static instance : QuizManager;\n\n    public static Instance() : QuizManager {\n        if(!QuizManager.instance){\n            QuizManager.instance = new QuizManager();\n        }\n\n        return QuizManager.instance;\n    }\n\n    @property(Button)\n    startButton : Button = null;\n\n    quizType : QuizType = 'None';\n    quizComponent : QuizComponent = null;\n    answerData : QuizData = null;\n\n    start(){\n        QuizManager.instance = this;\n        \n        this.SetQuizType('Gesture');\n\n        this.startButton.node.on(Button.EventType.CLICK, function(){\n            this.QuestionPhase();\n            this.startButton.node.active = false;\n        }, this);\n    }\n\n    public OnUpdate(){\n        this.AnswerPhase();\n\n        if(QuizModalManager.Instance().GetResultModal().isNext){\n            this.quizComponent.SetQuiz();\n            QuizModalManager.Instance().GetResultModal().isNext = false;\n        }\n    }\n\n    public SetQuizType(type : QuizType){\n        \n        if(this.quizComponent){\n            this.quizComponent.destroy();\n        }\n\n        if(type === 'Gesture'){\n            this.quizComponent = this.addComponent(GestureQuiz);\n        }\n        if(type === 'Act'){\n        }\n        if(type === 'Quiz'){\n        }\n    }\n\n    // 出題\n    private QuestionPhase(){\n        this.quizComponent.Initialize();\n        this.quizComponent.SetQuiz();\n    }\n\n    // \n    AnswerPhase(){\n        if(QuizModalManager.Instance().GetChoicesModal().GetChoics() > -1){\n            QuizModalManager.Instance().GetResultModal().SetInfo(QuizModalManager.Instance().GetChoicesModal().GetChoics(),this.quizComponent.GetQuizData());\n        }\n    }\n}\n\n"]}
{"version":3,"sources":["file:///Users/takeda.naomichi/Desktop/QuizTestProject/assets/Script/UI/Timer.ts"],"names":["_decorator","Component","Graphics","Label","ccclass","property","Timer","elapsed_time","time_limit","start","Reset","SetTimeLimit","limit","GetTimeLeft","Display","second","Math","ceil","minutes","floor","time_display","string","slice","_endAngle","PI","time_circle","fillColor","fromHEX","lineWidth","clear","arc","lineTo","close","stroke","fill","update","deltaTime"],"mappings":";;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAiBC,MAAAA,Q,OAAAA,Q;AAAUC,MAAAA,K,OAAAA,K;;;;;;;;;OAC1C;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBL,U;;uBAGjBM,K,WADZF,OAAO,CAAC,OAAD,C,UAEHC,QAAQ,CAACH,QAAD,C,UAGRG,QAAQ,CAACF,KAAD,C,2BALb,MACaG,KADb,SAC2BL,SAD3B,CACqC;AAAA;AAAA;;AAAA;;AAAA;;AAAA,eAOzBM,YAPyB,GAOD,CAPC;AAAA,eASzBC,UATyB,GASH,MATG;AAAA;;AAWjCC,QAAAA,KAAK,GAAG,CACP;;AAEMC,QAAAA,KAAK,GACZ;AACI,eAAKH,YAAL,GAAoB,CAApB;AACH;;AAEMI,QAAAA,YAAY,CAACC,KAAD,EACnB;AACI,eAAKJ,UAAL,GAAkBI,KAAlB;AACH;;AAEMC,QAAAA,WAAW,GAClB;AACI,iBAAQ,KAAKL,UAAL,GAAkB,KAAKD,YAA/B;AACH;;AAEMO,QAAAA,OAAO,GACd;AACI,cAAIC,MAAM,GAAGC,IAAI,CAACC,IAAL,CAAU,CAAC,KAAKT,UAAL,GAAkB,KAAKD,YAAxB,IAAwC,IAAlD,CAAb;AACA,cAAIW,OAAO,GAAGF,IAAI,CAACG,KAAL,CAAWJ,MAAM,GAAG,IAApB,CAAd;AACAA,UAAAA,MAAM,IAAI,EAAV,CAHJ,CAKI;;AACA,eAAKK,YAAL,CAAkBC,MAAlB,GAA2B,CAAC,OAAOH,OAAR,EAAiBI,KAAjB,CAAuB,CAAC,CAAxB,IAA6B,GAA7B,GAAmC,CAAC,OAAOP,MAAR,EAAgBO,KAAhB,CAAsB,CAAC,CAAvB,CAA9D,CANJ,CAQI;;AACA,cAAIC,SAAS,GAAG,CAAC,MAAM,OAAO,KAAKhB,YAAL,GAAoB,KAAKC,UAAhC,CAAP,IAAsDQ,IAAI,CAACQ,EAA3E,CATJ,CAUI;;;AAEA,eAAKC,WAAL,CAAiBC,SAAjB,CAA2BC,OAA3B,CAAmC,SAAnC;AACA,eAAKF,WAAL,CAAiBG,SAAjB,GAA6B,CAA7B;AAEA,eAAKH,WAAL,CAAiBI,KAAjB;AACA,eAAKJ,WAAL,CAAiBK,GAAjB,CAAqB,CAArB,EAAwB,CAAxB,EAA2B,EAA3B,EAA+B,MAAMd,IAAI,CAACQ,EAA1C,EAA8CD,SAA9C,EAAyD,IAAzD;AACA,eAAKE,WAAL,CAAiBM,MAAjB,CAAwB,CAAxB,EAA2B,CAA3B;AACA,eAAKN,WAAL,CAAiBO,KAAjB;AACA,eAAKP,WAAL,CAAiBQ,MAAjB;AACA,eAAKR,WAAL,CAAiBS,IAAjB;AACA,cAAG,KAAK3B,YAAL,GAAoB,KAAKC,UAA5B,EAAwC,KAAKD,YAAL,IAAqB,CAArB;AAC3C;;AAED4B,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AAxDgC,O;;;;;iBAER,I;;;;;;;iBAGF,I","sourcesContent":["import { _decorator, Component, Node, Graphics, Label } from 'cc';\nconst { ccclass, property } = _decorator;\n\n@ccclass('Timer')\nexport class Timer extends Component {\n    @property(Graphics)\n    time_circle : Graphics = null;\n\n    @property(Label)\n    time_display : Label = null;\n\n    private elapsed_time : number = 0;\n\n    private time_limit : number = 1800.0;\n\n    start() {\n    }\n\n    public Reset()\n    {\n        this.elapsed_time = 0;\n    }\n\n    public SetTimeLimit(limit: number)\n    {\n        this.time_limit = limit;\n    }\n\n    public GetTimeLeft()\n    {\n        return (this.time_limit - this.elapsed_time);\n    }\n\n    public Display()\n    {\n        let second = Math.ceil((this.time_limit - this.elapsed_time) / 60.0);\n        let minutes = Math.floor(second / 60.0);\n        second %= 60;\n\n        // 時間を表示\n        this.time_display.string = (\"00\" + minutes).slice(-2) + \":\" + (\"00\" + second).slice(-2);\n\n        //　時間（サークル）を表示\n        let _endAngle = (0.5 - 2.0 * (this.elapsed_time / this.time_limit)) * Math.PI;\n        // console.log(_endAngle);\n        \n        this.time_circle.fillColor.fromHEX('#00FFFF');\n        this.time_circle.lineWidth = 2;\n\n        this.time_circle.clear();\n        this.time_circle.arc(0, 0, 30, 0.5 * Math.PI, _endAngle, true);\n        this.time_circle.lineTo(0, 0);\n        this.time_circle.close();\n        this.time_circle.stroke();\n        this.time_circle.fill();\n        if(this.elapsed_time < this.time_limit) this.elapsed_time += 1;\n    }\n\n    update(deltaTime: number) {\n\n    }\n}\n\n"]}
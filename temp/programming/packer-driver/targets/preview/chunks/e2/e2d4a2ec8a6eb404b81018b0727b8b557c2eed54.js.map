{"version":3,"sources":["file:///Users/takeda.naomichi/Desktop/QuizTestProject/assets/Script/Game/Modal/ChoicesModal.ts"],"names":["_decorator","Component","Node","Button","Label","Sprite","Vec3","ChipControll","Timer","GameManager","QuizModalManager","BetModal","ccclass","property","ChoicesModal","choiceNumber","tempNumber","debugClientMode","start","timer","SetTimeLimit","Instance","GetPlayerInfo","thinkTime","buttonList","node","on","EventType","CLICK","Choice","nextButton","Next","active","coinsLabel","string","coins","toString","betModal","answerFrameSprite","position","GetGameInfo","qAnswer","update","deltaTime","DebugModalUpdate","Display","GetTimeLeft","GetIsDecide","DecideChoice","index","SetChoices","text","sprite","labelList","spriteList","spriteFrame","GetChoics","SetQuestion","sent","questionLabel","Initialize","GetClientMode","liverNode","userNode","odds","oddsLabelList","chipAnim","Play","ChangeModal","GetResultModal","SetCoinLabel","DontClickButton","Array"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, Button, Label, SpriteFrame, Sprite, Vec3 } from 'cc';\nimport { ChipControll } from '../../Chip/ChipControll';\nimport { Timer } from '../../UI/Timer';\nimport { ClientMode, GameManager } from '../Manager/GameManager';\nimport { QuizModalManager } from '../Manager/QuizModalManager';\nimport { BetModal } from './BetModal';\nimport { ResultModal } from './ResultModal';\nconst { ccclass, property } = _decorator;\n\n@ccclass('ChoicesModal')\nexport class ChoicesModal extends Component {\n\n    @property(Node)\n    private liverNode : Node = null;\n    @property(Node)\n    private userNode : Node = null;\n    @property(Button)\n    buttonList : Array<Button> = new Array<Button>();\n    @property(Label)\n    labelList : Array<Label> = new Array<Label>();\n    @property(Sprite)\n    spriteList : Array<Sprite> = new Array<Sprite>();\n    @property(Label)\n    private oddsLabelList : Array<Label> = new Array<Label>();\n    @property(Label)\n    private betLabelList : Array<Label> = new Array<Label>();\n    @property(Label)\n    private questionLabel : Label = null;\n    @property(Label)\n    private coinsLabel : Label = null;\n    @property(BetModal)\n    private betModal : BetModal = null; \n    @property(Button)\n    private nextButton : Button = null;\n    @property(Node)\n    private answerFrameSprite : Node = null;\n\n\n    @property(Timer)\n    timer : Timer = null;\n    @property(ChipControll)\n    chipAnim : ChipControll = null;\n\n    choiceNumber : number = -1;\n    private tempNumber : number = 0;\n    private debugClientMode : ClientMode = 'Liver';\n\n    start() {\n        this.timer.SetTimeLimit(GameManager.Instance().GetPlayerInfo().thinkTime);   // タイマーのセット\n        this.buttonList[0].node.on(Button.EventType.CLICK, function(){this.Choice(0);}, this);\n        this.buttonList[1].node.on(Button.EventType.CLICK, function(){this.Choice(1);}, this);\n        this.buttonList[2].node.on(Button.EventType.CLICK, function(){this.Choice(2);}, this);\n        this.buttonList[3].node.on(Button.EventType.CLICK, function(){this.Choice(3);}, this);\n        this.buttonList[4].node.on(Button.EventType.CLICK, function(){this.Choice(4);}, this);\n        this.buttonList[5].node.on(Button.EventType.CLICK, function(){this.Choice(5);}, this);\n        this.nextButton.node.on( Button.EventType.CLICK, this.Next, this);\n        this.nextButton.node.active = false;\n        this.coinsLabel.string = GameManager.Instance().GetPlayerInfo().coins.toString();\n        this.betModal.node.active = false;\n        this.answerFrameSprite.position = new Vec3(this.buttonList[GameManager.Instance().GetGameInfo().qAnswer].node.position);\n    }\n\n    update(deltaTime: number) {\n        this.DebugModalUpdate();\n\n        this.timer.Display();\n\n        if(this.timer.GetTimeLeft() <= 0){\n            this.nextButton.node.active = true;\n        }\n\n        if(this.betModal.GetIsDecide()){\n            this.DecideChoice();\n        }\n    }\n\n    // クリックした時\n    private Choice(index : number) {\n        this.betModal.node.active = true;    // ベットモーダルを表示\n        this.tempNumber = index;      // 選択した番号\n    }\n\n    // 選択肢を設定\n    public SetChoices(index : number, text : string, sprite : SpriteFrame){\n        this.labelList[index].string = text;\n        this.spriteList[index].spriteFrame = sprite;\n    }\n\n    \n    public GetChoics() : number{\n        return this.choiceNumber;\n    }\n\n    public SetQuestion(sent : string){\n        this.questionLabel.string = sent;\n    }\n\n    private Initialize(){\n        if(GameManager.Instance().GetClientMode() === 'Liver'){\n            this.liverNode.active = true;\n            this.userNode.active = false;\n            for(const odds of this.oddsLabelList){\n                odds.node.active = true;\n            }\n            this.answerFrameSprite.active = true;\n            this.debugClientMode = 'Liver';\n\n        }\n        else{\n            this.liverNode.active = false;\n            this.userNode.active = true;\n            for(const odds of this.oddsLabelList){\n                odds.node.active = false;\n            }\n            this.answerFrameSprite.active = false;\n            this.debugClientMode = 'User';\n        }\n    }\n\n    private DecideChoice(){\n        this.choiceNumber = this.tempNumber;\n        this.chipAnim.Play();\n    }\n\n    private Next(){\n        QuizModalManager.Instance().ChangeModal('Result');\n        QuizModalManager.Instance().GetResultModal().SetCoinLabel(\"400\");\n    }\n\n    private DontClickButton(){\n        this.liverNode.active = true;\n        this.userNode.active = false;\n        for(const odds of this.oddsLabelList){\n            odds.node.active = true;\n        }\n        this.debugClientMode = 'Liver';\n    }\n\n    private DebugModalUpdate(){\n        if(GameManager.Instance().GetClientMode() != this.debugClientMode){\n            this.Initialize();\n        }\n    }\n}\n\n"]}
{"version":3,"sources":["file:///Users/takeda.naomichi/Desktop/QuizTestProject/assets/Script/Game/Modal/QuestionModal.ts"],"names":["_decorator","Component","Node","Label","Button","Vec3","Sprite","GameManager","QuizModalManager","ccclass","property","QuestionModal","Number","debugClientMode","debugQuizMode","changeDelay","isNext","start","qStartB","node","on","EventType","CLICK","Next","update","deltaTime","DebugModalUpdate","Instance","ChangeModal","delayMax","userNode","active","liverNode","SetNumber","num","qNumber","string","toString","SetSentence","sent","qSentence","SetSelect","sele","qSelect","SetSprite","sprite","qSpriteFrame","spriteFrame","Initialize","qtype","qImageFrame","qSelectB","forEach","element","GetClientMode","setPosition","fontSize","Array"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, Label, Button, Vec2, Vec3, SpriteFrame, Sprite } from 'cc';\nimport { ClientMode, GameManager } from '../Manager/GameManager';\nimport { QuizModalManager } from '../Manager/QuizModalManager';\nimport { QuizType } from '../Quiz/QuizComponent';\nconst { ccclass, property } = _decorator;\n\n@ccclass('QuestionModal')\nexport class QuestionModal extends Component {\n\n    @property(Node)\n    private liverNode : Node = null;\n    @property(Label)\n    qNumber : Label = null;\n    @property(Label)\n    qSentence : Label = null;\n    @property(Label)\n    qSelect : Label = null;\n    @property(Node)\n    qImageFrame : Node = null;\n    @property(Sprite)\n    qSpriteFrame : Sprite = null;\n    @property(Button)\n    qStartB : Button = null;\n    @property(Button)\n    qSelectB : Array<Button> = new Array<Button>();\n    @property(Node)\n    private userNode : Node = null;\n\n    private debugClientMode : ClientMode = 'Liver';\n    private debugQuizMode : QuizType = 'None';\n\n    private changeDelay : number = 0.0; // 演出用の時間\n    @property(Number)\n    private delayMax : number = 1.0;\n    private isNext : boolean = false;\n\n    start() {\n        this.qStartB.node.on(Button.EventType.CLICK, this.Next,this);\n    }\n\n    update(deltaTime: number) {\n        this.DebugModalUpdate();\n\n        if(this.isNext){\n            this.changeDelay -= deltaTime;\n            if(this.changeDelay <= 0.0){\n                QuizModalManager.Instance().ChangeModal('Choices');\n                this.isNext = false;\n            }\n        }\n    }\n\n    private Next(){\n        this.isNext = true;\n        this.changeDelay = this.delayMax;\n        this.userNode.active = false;\n        this.liverNode.active = false;\n    }\n\n    public SetNumber(num : number){\n        this.qNumber.string = \"第\" + num.toString() + \"問\"; \n    }\n\n    public SetSentence(sent : string){\n        this.qSentence.string = sent;\n    }\n\n    public SetSelect(sele : Array<string>){\n        for(const sent in sele){\n            this.qSelect.string += sent;\n        }\n    }\n\n    public SetSprite(sprite : SpriteFrame){\n        this.qSpriteFrame.spriteFrame = sprite;\n    }\n\n    public Initialize(qtype : QuizType){\n\n        this.debugQuizMode = qtype;\n\n        this.node.active = true;\n        this.liverNode.active = true;\n        this.qNumber.node.active = true;\n        this.qSentence.node.active = true;\n\n        this.qSelect.node.active = false;\n        this.qImageFrame.active = false;\n        this.qSpriteFrame.node.active = false;\n        this.qStartB.node.active = false;\n        this.qSelectB.forEach(element => {element.node.active = false;});\n        this.userNode.active = false;\n\n        if(qtype === 'Gesture'){    // ジェスチャー\n            if(GameManager.Instance().GetClientMode() === 'Liver'){\n                this.qSentence.node.setPosition(new Vec3(0,75,0));\n                this.qSentence.fontSize = 23;\n                this.qImageFrame.active = true;\n                this.qSpriteFrame.node.active = true;\n                this.qStartB.node.active = true;\n                this.debugClientMode = 'Liver';\n            }\n            else{\n                this.liverNode.active = false;\n                this.userNode.active = true;\n                this.debugClientMode = 'User';\n            }\n        }\n        else if(qtype === 'Act'){   // アクト\n            this.qSentence.node.setPosition(new Vec3(0,50,0));\n            this.qStartB.node.active = true;\n        }\n        else if(qtype === 'Quiz'){   // クイズ\n            this.qSentence.node.setPosition(new Vec3(0,75,0));\n            this.qSelect.node.active = true;\n            this.qSelectB.forEach(element => {element.node.active = true;});\n        }\n    }\n\n    private DebugModalUpdate(){\n        if(GameManager.Instance().GetClientMode() != this.debugClientMode){\n\n            this.node.active = true;\n            this.liverNode.active = true;\n            this.qNumber.node.active = true;\n            this.qSentence.node.active = true;\n    \n            this.qSelect.node.active = false;\n            this.qImageFrame.active = false;\n            this.qSpriteFrame.node.active = false;\n            this.qStartB.node.active = false;\n            this.qSelectB.forEach(element => {element.node.active = false;});\n            this.userNode.active = false;\n\n            if(this.debugQuizMode === 'Gesture'){    // ジェスチャー\n                if(GameManager.Instance().GetClientMode() === 'Liver'){\n                    this.qSentence.node.setPosition(new Vec3(0,75,0));\n                    this.qSentence.fontSize = 23;\n                    this.qImageFrame.active = true;\n                    this.qSpriteFrame.node.active = true;\n                    this.qStartB.node.active = true;\n                    this.debugClientMode = 'Liver';\n                }\n                else{\n                    this.liverNode.active = false;\n                    this.userNode.active = true;\n                    this.debugClientMode = 'User';\n                }\n            }\n            else if(this.debugQuizMode === 'Act'){   // アクト\n                this.qSentence.node.setPosition(new Vec3(0,50,0));\n                this.qStartB.node.active = true;\n            }\n            else if(this.debugQuizMode === 'Quiz'){   // クイズ\n                this.qSentence.node.setPosition(new Vec3(0,75,0));\n                this.qSelect.node.active = true;\n                this.qSelectB.forEach(element => {element.node.active = true;});\n            }\n        }\n\n    }\n}\n\n"]}
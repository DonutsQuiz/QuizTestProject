{"version":3,"sources":["file:///Users/takeda.naomichi/Desktop/QuizTestProject/assets/Script/Game/Manager/QuizModalManager.ts"],"names":["_decorator","Component","Node","instantiate","Prefab","ChoicesModal","OverallResultModal","QuestionModal","ResultModal","WaitModal","GameManager","ccclass","property","ModalType","None","Question","Choices","Result","Overall","Wait","QuizModalManager","question","choices","result","overall","wait","debugClientMode","debugNowType","Instance","instance","start","temp","questionPrefab","setParent","canvas","active","getComponent","choicesPrefab","resultPrefab","overallPrefab","waitPrefab","update","deltaTime","OnUpdate","DebugClientMode","ChangeModal","nextType","node","GetQuestionModal","GetChoicesModal","GetResultModal","GetOverallResultModal","GetClientMode"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, instantiate, Prefab, Canvas, Button, Label } from 'cc';\nimport { ChoicesModal } from '../Modal/ChoicesModal';\nimport { OverallResultModal } from '../Modal/OverallResultModal';\nimport { QuestionModal } from '../Modal/QuestionModal';\nimport { ResultModal } from '../Modal/ResultModal';\nimport { WaitModal } from '../Modal/User/WaitModal';\nimport { ClientMode, GameManager } from './GameManager';\nconst { ccclass, property } = _decorator;\n\nconst ModalType = {\n    None     : 'None',\n    Question : 'Question',\n    Choices  : 'Choices',\n    Result   : 'Result',\n    Overall  : 'Overall',\n    Wait     : 'Wait',\n} as const;\n\nexport type ModalType = typeof ModalType[keyof typeof ModalType];\n\n@ccclass('QuizModalManager')\nexport class QuizModalManager extends Component {\n\n    private static instance : QuizModalManager;\n    \n    public static Instance() : QuizModalManager {\n        if(!QuizModalManager.instance){\n            QuizModalManager.instance = new QuizModalManager();\n        }\n\n        return QuizModalManager.instance;\n    }\n\n    @property(Node)\n    canvas : Node = null;\n    @property(Prefab)\n    private questionPrefab : Prefab = null;\n    @property(Prefab)\n    private choicesPrefab : Prefab = null;\n    @property(Prefab)\n    private resultPrefab : Prefab = null;\n    @property(Prefab)\n    private overallPrefab : Prefab = null;\n    @property(Prefab)\n    private waitPrefab : Prefab = null;\n\n    private question : QuestionModal = null;\n    private choices : ChoicesModal = null;\n    private result : ResultModal = null;\n    private overall : OverallResultModal = null;\n    private wait : WaitModal = null;\n\n    private debugClientMode : ClientMode = 'Liver';\n    private debugNowType : ModalType = 'None';\n\n    start() {\n        QuizModalManager.instance = this;\n\n        var temp = instantiate(this.questionPrefab);\n        temp.setParent(this.canvas);\n        temp.active = false;\n        this.question = temp.getComponent(QuestionModal);\n\n        temp = instantiate(this.choicesPrefab);\n        temp.setParent(this.canvas);\n        temp.active = false;\n        this.choices = temp.getComponent(ChoicesModal);\n\n        temp = instantiate(this.resultPrefab);\n        temp.setParent(this.canvas);\n        temp.active = false;\n        this.result = temp.getComponent(ResultModal);\n\n        temp = instantiate(this.overallPrefab);\n        temp.setParent(this.canvas);\n        temp.active = false;\n        this.overall = temp.getComponent(OverallResultModal);\n\n        temp = instantiate(this.waitPrefab);\n        temp.setParent(this.canvas);\n        temp.active = false;\n        this.wait = temp.getComponent(WaitModal);\n    }\n\n    update(deltaTime: number) {\n        \n    }\n\n    public OnUpdate(deltaTime : number){\n        this.DebugClientMode();\n    }\n\n    public ChangeModal(nextType : ModalType){\n        if(nextType === 'Question'){\n            this.result.node.active = false;\n            this.overall.node.active = false;\n            this.question.node.active = true;\n        }\n        else if(nextType === 'Choices'){\n            this.question.node.active = false;\n            this.choices.node.active = true;\n        }\n        else if(nextType === 'Result'){\n            this.choices.node.active = false;\n            this.result.node.active = true;\n        }\n        else if(nextType === 'Overall'){\n            this.question.node.active = false;\n            this.choices.node.active = false;\n            this.overall.node.active = true;\n        }\n\n        this.debugNowType = nextType;\n    }\n\n    public GetQuestionModal() : QuestionModal{\n        return this.question;\n    }\n    public GetChoicesModal() : ChoicesModal{\n        return this.choices;\n    }\n    public GetResultModal() : ResultModal{\n        return this.result;\n    }\n    public GetOverallResultModal() : OverallResultModal{\n        return this.overall;\n    }\n\n\n\n    private DebugClientMode(){\n        if(GameManager.Instance().GetClientMode() != this.debugClientMode){\n            this.debugClientMode = GameManager.Instance().GetClientMode();\n            if(this.debugClientMode === 'Liver'){\n                if(this.debugNowType === 'Question'){\n                    this.wait.node.active = false;\n                    this.question.node.active = true;\n                }\n                else if(this.debugNowType === 'Choices'){\n                    this.choices.node.active = true;\n                }\n                else if(this.debugNowType === 'Result'){\n                    this.result.node.active = true;\n                }\n                else if(this.debugNowType === 'Overall'){\n                    this.overall.node.active = true;\n                }\n            }\n            else if(this.debugClientMode === 'User'){\n                if(this.debugNowType === 'Question'){\n                    this.wait.node.active = true;\n                    this.question.node.active = false;\n                }\n                else if(this.debugNowType === 'Choices'){\n                    this.choices.node.active = true;\n                }\n                else if(this.debugNowType === 'Result'){\n                    this.result.node.active = true;\n                }\n                else if(this.debugNowType === 'Overall'){\n                    this.overall.node.active = true;\n                }\n            }\n        }\n    }\n}\n\n"]}
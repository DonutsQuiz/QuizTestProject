{"version":3,"sources":["file:///Users/takeda.naomichi/TestQuizSecond/assets/Script/Game/Quiz/GestureQuiz.ts"],"names":["_decorator","math","GestureDataBase","QuizComponent","ccclass","property","GestureQuiz","mSprite","mData","start","update","deltaTime","SetQuiz","dataList","GetData","DecisionAnswer","questionModal","SetNumber","mNumber","SetSentence","mSentence","SetSprite","temp","i","select","mAnswer","choicesModal","SetChoices","mIndex","tempdata","result","n","length","resultModal","SetAnswerLabel","SetAnswerSprite","Initialize","Reset","mType","randomRangeInt","GetAllData"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAA0CC,MAAAA,I,OAAAA,I;;AAE1CC,MAAAA,e,iBAAAA,e;;AACAC,MAAAA,a,iBAAAA,a;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBL,U;;6BAKjBM,W,WADZF,OAAO,CAAC,aAAD,C,UAGHC,QAAQ;AAAA;AAAA,6C,2BAHb,MACaC,WADb;AAAA;AAAA,0CAC+C;AAAA;AAAA;;AAAA;;AAAA,eAK3CC,OAL2C;AAAA,eAM3CC,KAN2C;AAAA;;AAQ3CC,QAAAA,KAAK,GAAG,CAEP;;AAEDC,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AAEMC,QAAAA,OAAO,GAAE;AACZ;AACA,eAAKJ,KAAL,GAAa,KAAKK,QAAL,CAAcC,OAAd,CAAsB,KAAKC,cAAL,EAAtB,CAAb;AACA,eAAKC,aAAL,CAAmBC,SAAnB,CAA6B,EAAE,KAAKC,OAApC;AACA,eAAKF,aAAL,CAAmBG,WAAnB,CAA+B,KAAKC,SAAL,GAAiB,aAAhD;AACA,eAAKJ,aAAL,CAAmBK,SAAnB,CAA6B,KAAKd,OAAL,GAAe,KAAKC,KAAL,CAAWD,OAAvD,EALY,CAQZ;;AACA,cAAIe,IAAoB,GAAG,CAAC,CAAC,CAAF,EAAI,CAAC,CAAL,EAAO,CAAC,CAAR,EAAU,CAAC,CAAX,EAAa,CAAC,CAAd,EAAgB,CAAC,CAAjB,CAA3B;;AACA,eAAI,IAAIC,CAAU,GAAG,CAArB,EAAwBA,CAAC,GAAG,CAA5B,EAA+BA,CAAC,EAAhC,EAAmC;AAC/B,gBAAIC,MAAJ;;AACA,gBAAGD,CAAC,KAAK,CAAT,EAAW;AAACC,cAAAA,MAAM,GAAG,IAAT;AAAe,aAA3B,MACK,IAAGD,CAAC,KAAK,CAAT,EAAW;AAACC,cAAAA,MAAM,GAAG,IAAT;AAAe,aAA3B,MACA,IAAGD,CAAC,KAAK,CAAT,EAAW;AAACC,cAAAA,MAAM,GAAG,IAAT;AAAe,aAA3B,MACA,IAAGD,CAAC,KAAK,CAAT,EAAW;AAACC,cAAAA,MAAM,GAAG,IAAT;AAAe,aAA3B,MACA,IAAGD,CAAC,KAAK,CAAT,EAAW;AAACC,cAAAA,MAAM,GAAG,IAAT;AAAe,aAA3B,MACA,IAAGD,CAAC,KAAK,CAAT,EAAW;AAACC,cAAAA,MAAM,GAAG,IAAT;AAAe;;AAEhC,gBAAGD,CAAC,KAAK,KAAKf,KAAL,CAAWiB,OAApB,EAA4B;AACxB,mBAAKC,YAAL,CAAkBC,UAAlB,CAA6BJ,CAA7B,EAAgCC,MAAhC,EAAwC,KAAKhB,KAAL,CAAWD,OAAnD;AACAe,cAAAA,IAAI,CAACC,CAAD,CAAJ,GAAU,KAAKf,KAAL,CAAWoB,MAArB;AACH,aAHD,MAII;AACA,kBAAIC,QAAsB,GAAG,IAA7B;;AACA,iBAAG;AACCA,gBAAAA,QAAQ,GAAG,KAAKhB,QAAL,CAAcC,OAAd,CAAsB,KAAKC,cAAL,EAAtB,CAAX;AACA,oBAAIe,MAAgB,GAAG,KAAvB;;AACA,qBAAI,IAAIC,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGT,IAAI,CAACU,MAAxB,EAAgCD,CAAC,EAAjC,EAAoC;AAChC,sBAAGF,QAAQ,CAACD,MAAT,KAAoB,KAAKpB,KAAL,CAAWoB,MAA/B,IAAyCN,IAAI,CAACS,CAAD,CAAJ,KAAYF,QAAQ,CAACD,MAAjE,EAAwE;AACpEE,oBAAAA,MAAM,GAAG,KAAT;AACA;AACH;;AAED,sBAAGR,IAAI,CAACS,CAAD,CAAJ,KAAY,CAAC,CAAhB,EAAkB;AACdT,oBAAAA,IAAI,CAACS,CAAD,CAAJ,GAAUF,QAAQ,CAACD,MAAnB;AACAE,oBAAAA,MAAM,GAAG,IAAT;AACA;AACH;AACJ;AACJ,eAfD,QAeS,CAACA,MAfV;;AAiBA,mBAAKJ,YAAL,CAAkBC,UAAlB,CAA6BJ,CAA7B,EAAgCC,MAAhC,EAAwCK,QAAQ,CAACtB,OAAjD;AACH;AACJ,WA5CW,CA8CZ;;;AACA,eAAK0B,WAAL,CAAiBC,cAAjB,CAAgC,KAAK1B,KAAL,CAAWiB,OAA3C,EAAoD,EAApD;AACA,eAAKQ,WAAL,CAAiBE,eAAjB,CAAiC,KAAK5B,OAAtC;AACH;;AAEM6B,QAAAA,UAAU,GAAE;AACf,gBAAMC,KAAN;AACA,eAAKrB,aAAL,CAAmBoB,UAAnB,CAA8B,KAAKE,KAAL,GAAa,SAA3C;AACA,eAAK/B,OAAL,GAAe,IAAf,CAHe,CAGO;;AACtB,eAAKC,KAAL,GAAa,IAAb;AACH;;AAEOO,QAAAA,cAAc,GAAW;AAC7B,iBAAOd,IAAI,CAACsC,cAAL,CAAoB,CAApB,EAAsB,KAAK1B,QAAL,CAAc2B,UAAd,GAA2BR,MAAjD,CAAP;AACH;;AA5E0C,O;;;;;iBAGd,I","sourcesContent":["import { _decorator, Component, Node, SpriteFrame, math, SphereColliderComponent } from 'cc';\nimport { GestureData } from './DataBase/GestureData';\nimport { GestureDataBase } from './DataBase/GestureDataBase';\nimport { QuizComponent, QuizData } from './QuizComponent';\nconst { ccclass, property } = _decorator;\n\n\n\n@ccclass('GestureQuiz')\nexport class GestureQuiz extends QuizComponent {\n\n    @property(GestureDataBase)\n    dataList : GestureDataBase = null;\n\n    mSprite : SpriteFrame;  // 問題の画像\n    mData : GestureData;\n\n    start() {\n\n    }\n\n    update(deltaTime: number) {\n        \n    }\n\n    public SetQuiz(){\n        // 問題文\n        this.mData = this.dataList.GetData(this.DecisionAnswer());\n        this.questionModal.SetNumber(++this.mNumber);\n        this.questionModal.SetSentence(this.mSentence = \"この顔を演じてください\");\n        this.questionModal.SetSprite(this.mSprite = this.mData.mSprite);\n\n\n        // 選択肢\n        var temp : Array<number> = [-1,-1,-1,-1,-1,-1];\n        for(var i : number = 0; i < 6; i++){\n            var select : string;\n            if(i === 0){select = \"A.\";}\n            else if(i === 1){select = \"B.\";}\n            else if(i === 2){select = \"C.\";}\n            else if(i === 3){select = \"D.\";}\n            else if(i === 4){select = \"E.\";}\n            else if(i === 5){select = \"F.\";}\n\n            if(i === this.mData.mAnswer){\n                this.choicesModal.SetChoices(i, select, this.mData.mSprite);\n                temp[i] = this.mData.mIndex;\n            }\n            else{\n                var tempdata : GestureData = null\n                do {\n                    tempdata = this.dataList.GetData(this.DecisionAnswer());\n                    var result : Boolean = false;\n                    for(var n = 0; n < temp.length; n++){\n                        if(tempdata.mIndex === this.mData.mIndex || temp[n] === tempdata.mIndex){\n                            result = false;\n                            break;\n                        }\n\n                        if(temp[n] === -1){\n                            temp[n] = tempdata.mIndex;\n                            result = true;\n                            break;\n                        }\n                    }\n                } while (!result);\n\n                this.choicesModal.SetChoices(i, select, tempdata.mSprite);\n            }\n        }\n\n        // 結果\n        this.resultModal.SetAnswerLabel(this.mData.mAnswer ,\"\");\n        this.resultModal.SetAnswerSprite(this.mSprite);\n    }\n\n    public Initialize(){\n        super.Reset();\n        this.questionModal.Initialize(this.mType = 'Gesture');\n        this.mSprite = null;  // 問題の画像\n        this.mData = null;\n    }\n\n    private DecisionAnswer() : number{\n        return math.randomRangeInt(0,this.dataList.GetAllData().length);\n    }\n}\n\n"]}